"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{14085:(e,t,r)=>{r.d(t,{$:()=>o});var a=r(95155),n=r(12115),l=r(12317),i=r(31027),s=r(29602);let u=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--background)] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-[var(--primary)] text-[var(--primary-foreground)] shadow-sm hover:opacity-90",destructive:"bg-red-600 text-white shadow-sm hover:bg-red-700",outline:"border border-[var(--border)] bg-transparent hover:bg-[var(--muted)]",secondary:"bg-[var(--muted)] text-[var(--foreground)] hover:opacity-90",ghost:"hover:bg-[var(--muted)]",link:"text-[var(--primary)] underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:o=!1,...c}=e,f=o?l.DX:"button";return(0,a.jsx)(f,{className:(0,s.cn)(u({variant:n,size:i,className:r})),ref:t,...c})});o.displayName="Button"},37334:(e,t,r)=>{r.d(t,{E$:()=>f,HX:()=>c,bp:()=>o,gR:()=>s,uG:()=>u});var a=r(12115),n=r(63259),l=r(51287),i=r(6888);function s(){let{user:e,useSupabase:t}=(0,i.A)(),r=a.useMemo(()=>(0,n.A)(),[]),[s,u]=a.useState([]),[o,c]=a.useState(!0),[f,d]=a.useState(null),y=a.useCallback(async()=>{if(!t||!r){u([]),c(!1),d(null);return}c(!0),d(null);try{let e=await l.vK(r);u(e)}catch(e){d(e instanceof Error?e.message:"Erreur")}finally{c(!1)}},[t,r]);a.useEffect(()=>{y()},[y]);let p=a.useCallback(async a=>{if(t&&r){d(null);try{await l.KT(r,a.trim(),e.id),await y()}catch(e){throw d(e instanceof Error?e.message:"Erreur"),e}}},[t,r,e.id,y]),h=a.useCallback(async(e,a,n)=>{if(t&&r){d(null);try{await l.eJ(r,e,a),await y()}catch(e){throw d(e instanceof Error?e.message:"Erreur"),e}}},[t,r,y]),m=a.useCallback(async e=>{if(t&&r){d(null);try{await l.wt(r,e),await y()}catch(e){throw d(e instanceof Error?e.message:"Erreur"),e}}},[t,r,y]);return{data:s,loading:o,error:f,refetch:y,addClass:p,updateClass:h,deleteClass:m}}function u(e){let t=a.useMemo(()=>(0,n.A)(),[]),{useSupabase:r}=(0,i.A)(),[s,u]=a.useState([]),[o,c]=a.useState(!1),[f,d]=a.useState(null),y=a.useCallback(async()=>{if(!e||!r||!t){u([]);return}c(!0),d(null);try{let r=await l.n0(t,e);u(r)}catch(e){d(e instanceof Error?e.message:"Erreur")}finally{c(!1)}},[e,r,t]);a.useEffect(()=>{y()},[y]);let p=a.useCallback(async a=>{if(e&&r&&t){d(null);try{await l.Yh(t,e,a),await y()}catch(e){throw d(e instanceof Error?e.message:"Erreur"),e}}},[e,r,t,y]),h=a.useCallback(async a=>{if(e&&r&&t){d(null);try{await l.w4(t,e,a),await y()}catch(e){throw d(e instanceof Error?e.message:"Erreur"),e}}},[e,r,t,y]);return{data:s,loading:o,error:f,refetch:y,addStudentToClass:p,removeStudentFromClass:h}}function o(e){let t=a.useMemo(()=>(0,n.A)(),[]),{useSupabase:r}=(0,i.A)(),[s,u]=a.useState([]),[o,c]=a.useState(!0),[f,d]=a.useState(null),y=a.useCallback(async()=>{if(!e){u([]),c(!1);return}if(!r||!t){u([]),c(!1),d(null);return}c(!0),d(null);try{let r=await l.us(t,e);u(r)}catch(e){d(e instanceof Error?e.message:"Erreur")}finally{c(!1)}},[e,r,t]);a.useEffect(()=>{y()},[y]);let p=a.useCallback(async a=>{if(e&&r&&t){d(null);try{await l.Sy(t,e,a),await y()}catch(e){throw d(e instanceof Error?e.message:"Erreur"),e}}},[e,r,t,y]);return{data:s,loading:o,error:f,refetch:y,setGrades:p}}function c(e){let t=a.useMemo(()=>(0,n.A)(),[]),{user:r,useSupabase:s}=(0,i.A)(),[u,o]=a.useState([]),[c,f]=a.useState(!0),[d,y]=a.useState(null),p=a.useCallback(async()=>{if(!s||!t){o([]),f(!1),y(null);return}f(!0),y(null);try{let r=await l.se(t,e);o(r)}catch(e){y(e instanceof Error?e.message:"Erreur")}finally{f(!1)}},[s,t,null==e?void 0:e.classId]);a.useEffect(()=>{p()},[p]);let h=a.useCallback(async e=>{if(!s||!t)throw Error("Supabase requis");y(null);try{let a=await l.GH(t,{...e,uploadedBy:r.id});return await p(),a}catch(e){throw y(e instanceof Error?e.message:"Erreur"),e}},[s,t,r.id,p]),m=a.useCallback(async(e,r)=>{if(s&&t){y(null);try{if(r)try{await l.Gd(t,r)}catch(e){console.warn("Suppression du fichier Storage:",e)}await l.w$(t,e),await p()}catch(e){throw y(e instanceof Error?e.message:"Erreur"),e}}},[s,t,p]);return{data:u,loading:c,error:d,refetch:p,addCorrection:h,deleteCorrection:m}}function f(e,t){let r=a.useMemo(()=>(0,n.A)(),[]),[l,i]=a.useState([]),[s,u]=a.useState(!0),o=a.useCallback(async()=>{if(!t||!e||!r){i([]),u(!1);return}u(!0);try{let{data:t,error:a}=await r.from("notifications").select("id, title, message, read, created_at").eq("user_id",e).order("created_at",{ascending:!1});if(a)throw Error(a.message);i(null!=t?t:[])}catch(e){i([])}finally{u(!1)}},[t,e,r]);a.useEffect(()=>{o()},[o]);let c=a.useCallback(async e=>{r&&(await r.from("notifications").update({read:!0}).eq("id",e),i(t=>t.map(t=>t.id===e?{...t,read:!0}:t)))},[r]),f=a.useCallback(async()=>{r&&e&&(await r.from("notifications").update({read:!0}).eq("user_id",e),i(e=>e.map(e=>({...e,read:!0}))))},[r,e]),d=l.filter(e=>!e.read).length;return{notifications:l,unreadCount:d,loading:s,markAsRead:c,markAllAsRead:f,refetch:o}}},29602:(e,t,r)=>{r.d(t,{cn:()=>l});var a=r(43463),n=r(69795);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},17548:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(67401).A)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])},92823:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(67401).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},88068:(e,t,r)=>{r.d(t,{s:()=>i,t:()=>l});var a=r(12115);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let r=!1,a=e.map(e=>{let a=n(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():n(e[t],null)}}}}function i(...e){return a.useCallback(l(...e),e)}},12317:(e,t,r)=>{r.d(t,{DX:()=>f,TL:()=>c});var a,n=r(12115),l=r(88068),i=r(95155),s=Symbol.for("react.lazy"),u=(a||(a=r.t(n,2)))[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===s&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:r,...a}=e;if(o(r)&&"function"==typeof u&&(r=u(r._payload)),n.isValidElement(r)){var i;let e,s;let u=(i=r,(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.props.ref:i.props.ref||i.ref),o=function(e,t){let r={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...l}:"className"===a&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==n.Fragment&&(o.ref=t?(0,l.t)(t,u):u),n.cloneElement(r,o)}return n.Children.count(r)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=n.forwardRef((e,r)=>{let{children:a,...l}=e;o(a)&&"function"==typeof u&&(a=u(a._payload));let s=n.Children.toArray(a),c=s.find(y);if(c){let e=c.props.children,a=s.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...l,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,i.jsx)(t,{...l,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}var f=c("Slot"),d=Symbol("radix.slottable");function y(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}},31027:(e,t,r)=>{r.d(t,{F:()=>i});var a=r(43463);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.$,i=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:s}=t,u=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],a=null==s?void 0:s[e];if(null===t)return null;let l=n(t)||n(a);return i[e][l]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return l(e,u,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...o}[t]):({...s,...o})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}}]);