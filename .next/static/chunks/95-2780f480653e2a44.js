"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{71183:(e,r,a)=>{a.d(r,{p:()=>l});var t=a(95155),s=a(29602);function l(e){let{icon:r,title:a,description:l,action:n,className:i}=e;return(0,t.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center justify-center rounded-2xl border border-dashed border-[var(--border)] bg-[var(--muted)]/20 py-16 text-center",i),children:[(0,t.jsx)("div",{className:"text-[var(--muted-foreground)]",children:r}),(0,t.jsx)("p",{className:"mt-4 font-medium text-[var(--foreground)]",children:a}),l&&(0,t.jsx)("p",{className:"mt-1 text-sm text-[var(--muted-foreground)]",children:l}),n&&(0,t.jsx)("div",{className:"mt-4",children:n})]})}},66796:(e,r,a)=>{a.d(r,{G:()=>i});var t=a(95155),s=a(29602);let l={sm:"h-5 w-5 border-2",md:"h-8 w-8 border-2",lg:"h-12 w-12 border-[3px]"};function n(e){let{className:r,size:a="md"}=e;return(0,t.jsx)("span",{role:"status","aria-label":"Chargement",className:(0,s.cn)("inline-block animate-spin rounded-full border-current border-t-transparent text-[var(--primary)]",l[a],r)})}function i(e){let{message:r="Chargementâ€¦",className:a,spinnerSize:l="lg"}=e;return(0,t.jsxs)("div",{className:(0,s.cn)("flex flex-col items-center justify-center gap-3 py-12 text-center",a),"aria-live":"polite","aria-busy":"true",children:[(0,t.jsx)(n,{size:l}),r&&(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)]",children:r})]})}},14085:(e,r,a)=>{a.d(r,{$:()=>d});var t=a(95155),s=a(12115),l=a(12317),n=a(31027),i=a(29602);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--background)] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-[var(--primary)] text-[var(--primary-foreground)] shadow-sm hover:opacity-90",destructive:"bg-red-600 text-white shadow-sm hover:bg-red-700",outline:"border border-[var(--border)] bg-transparent hover:bg-[var(--muted)]",secondary:"bg-[var(--muted)] text-[var(--foreground)] hover:opacity-90",ghost:"hover:bg-[var(--muted)]",link:"text-[var(--primary)] underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,t.jsx)(u,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:r,...c})});d.displayName="Button"},35007:(e,r,a)=>{a.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i});var t=a(95155),s=a(12115),l=a(29602);let n=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("rounded-2xl border border-[var(--border)] bg-[var(--card)] text-[var(--card-foreground)] shadow-lg shadow-black/5 transition-all duration-300",a),...s})});n.displayName="Card";let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("h3",{ref:r,className:(0,l.cn)("font-display text-xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-[var(--muted-foreground)]",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},7837:(e,r,a)=>{a.d(r,{Cf:()=>u,Es:()=>m,L3:()=>p,c7:()=>f,lG:()=>o,rr:()=>y});var t=a(95155),s=a(12115),l=a(48989),n=a(40767),i=a(29602);let o=l.bL;l.l9;let d=l.ZL;l.bm;let c=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(l.hJ,{ref:r,className:(0,i.cn)("fixed inset-0 z-50 bg-black/60 backdrop-blur-sm opacity-100 transition-opacity duration-200 data-[state=closed]:opacity-0",a),...s})});c.displayName=l.hJ.displayName;let u=s.forwardRef((e,r)=>{let{className:a,children:s,showClose:o=!0,...u}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(l.UC,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl border border-[var(--border)] bg-[var(--card)] p-6 shadow-2xl duration-200 transition-all data-[state=closed]:opacity-0 data-[state=closed]:scale-95 data-[state=open]:opacity-100 data-[state=open]:scale-100",a),...u,children:[s,o&&(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-lg p-1 text-[var(--muted-foreground)] opacity-70 transition hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-[var(--primary)]",children:[(0,t.jsx)(n.A,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"sr-only",children:"Fermer"})]})]})]})});u.displayName=l.UC.displayName;let f=e=>{let{className:r,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-left",r),...a})};f.displayName="DialogHeader";let m=e=>{let{className:r,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",r),...a})};m.displayName="DialogFooter";let p=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(l.hE,{ref:r,className:(0,i.cn)("font-display text-lg font-semibold leading-none tracking-tight text-[var(--foreground)]",a),...s})});p.displayName=l.hE.displayName;let y=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(l.VY,{ref:r,className:(0,i.cn)("text-sm text-[var(--muted-foreground)]",a),...s})});y.displayName=l.VY.displayName},9955:(e,r,a)=>{a.d(r,{p:()=>n});var t=a(95155),s=a(12115),l=a(29602);let n=s.forwardRef((e,r)=>{let{className:a,type:s,...n}=e;return(0,t.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-lg border border-[var(--border)] bg-[var(--background)] px-3 py-2 text-sm text-[var(--foreground)] placeholder:text-[var(--muted-foreground)] focus:outline-none focus:ring-2 focus:ring-[var(--primary)] disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...n})});n.displayName="Input"},15785:(e,r,a)=>{a.d(r,{J:()=>i});var t=a(95155),s=a(12115),l=a(24352),n=a(29602);let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)(l.b,{ref:r,className:(0,n.cn)("text-sm font-medium leading-none text-[var(--foreground)] peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...s})});i.displayName=l.b.displayName},37334:(e,r,a)=>{a.d(r,{E$:()=>u,HX:()=>c,bp:()=>d,gR:()=>i,uG:()=>o});var t=a(12115),s=a(63259),l=a(51287),n=a(6888);function i(){let{user:e,useSupabase:r}=(0,n.A)(),a=t.useMemo(()=>(0,s.A)(),[]),[i,o]=t.useState([]),[d,c]=t.useState(!0),[u,f]=t.useState(null),m=t.useCallback(async()=>{if(!r||!a){o([]),c(!1),f(null);return}c(!0),f(null);try{let e=await l.vK(a);o(e)}catch(e){f(e instanceof Error?e.message:"Erreur")}finally{c(!1)}},[r,a]);t.useEffect(()=>{m()},[m]);let p=t.useCallback(async t=>{if(r&&a){f(null);try{await l.KT(a,t.trim(),e.id),await m()}catch(e){throw f(e instanceof Error?e.message:"Erreur"),e}}},[r,a,e.id,m]),y=t.useCallback(async(e,t,s)=>{if(r&&a){f(null);try{await l.eJ(a,e,t),await m()}catch(e){throw f(e instanceof Error?e.message:"Erreur"),e}}},[r,a,m]),g=t.useCallback(async e=>{if(r&&a){f(null);try{await l.wt(a,e),await m()}catch(e){throw f(e instanceof Error?e.message:"Erreur"),e}}},[r,a,m]);return{data:i,loading:d,error:u,refetch:m,addClass:p,updateClass:y,deleteClass:g}}function o(e){let r=t.useMemo(()=>(0,s.A)(),[]),{useSupabase:a}=(0,n.A)(),[i,o]=t.useState([]),[d,c]=t.useState(!1),[u,f]=t.useState(null),m=t.useCallback(async()=>{if(!e||!a||!r){o([]);return}c(!0),f(null);try{let a=await l.n0(r,e);o(a)}catch(e){f(e instanceof Error?e.message:"Erreur")}finally{c(!1)}},[e,a,r]);t.useEffect(()=>{m()},[m]);let p=t.useCallback(async t=>{if(e&&a&&r){f(null);try{await l.Yh(r,e,t),await m()}catch(e){throw f(e instanceof Error?e.message:"Erreur"),e}}},[e,a,r,m]),y=t.useCallback(async t=>{if(e&&a&&r){f(null);try{await l.w4(r,e,t),await m()}catch(e){throw f(e instanceof Error?e.message:"Erreur"),e}}},[e,a,r,m]);return{data:i,loading:d,error:u,refetch:m,addStudentToClass:p,removeStudentFromClass:y}}function d(e){let r=t.useMemo(()=>(0,s.A)(),[]),{useSupabase:a}=(0,n.A)(),[i,o]=t.useState([]),[d,c]=t.useState(!0),[u,f]=t.useState(null),m=t.useCallback(async()=>{if(!e){o([]),c(!1);return}if(!a||!r){o([]),c(!1),f(null);return}c(!0),f(null);try{let a=await l.us(r,e);o(a)}catch(e){f(e instanceof Error?e.message:"Erreur")}finally{c(!1)}},[e,a,r]);t.useEffect(()=>{m()},[m]);let p=t.useCallback(async t=>{if(e&&a&&r){f(null);try{await l.Sy(r,e,t),await m()}catch(e){throw f(e instanceof Error?e.message:"Erreur"),e}}},[e,a,r,m]);return{data:i,loading:d,error:u,refetch:m,setGrades:p}}function c(e){let r=t.useMemo(()=>(0,s.A)(),[]),{user:a,useSupabase:i}=(0,n.A)(),[o,d]=t.useState([]),[c,u]=t.useState(!0),[f,m]=t.useState(null),p=t.useCallback(async()=>{if(!i||!r){d([]),u(!1),m(null);return}u(!0),m(null);try{let a=await l.se(r,e);d(a)}catch(e){m(e instanceof Error?e.message:"Erreur")}finally{u(!1)}},[i,r,null==e?void 0:e.classId]);t.useEffect(()=>{p()},[p]);let y=t.useCallback(async e=>{if(!i||!r)throw Error("Supabase requis");m(null);try{let t=await l.GH(r,{...e,uploadedBy:a.id});return await p(),t}catch(e){throw m(e instanceof Error?e.message:"Erreur"),e}},[i,r,a.id,p]),g=t.useCallback(async(e,a)=>{if(i&&r){m(null);try{if(a)try{await l.Gd(r,a)}catch(e){console.warn("Suppression du fichier Storage:",e)}await l.w$(r,e),await p()}catch(e){throw m(e instanceof Error?e.message:"Erreur"),e}}},[i,r,p]);return{data:o,loading:c,error:f,refetch:p,addCorrection:y,deleteCorrection:g}}function u(e,r){let a=t.useMemo(()=>(0,s.A)(),[]),[l,n]=t.useState([]),[i,o]=t.useState(!0),d=t.useCallback(async()=>{if(!r||!e||!a){n([]),o(!1);return}o(!0);try{let{data:r,error:t}=await a.from("notifications").select("id, title, message, read, created_at").eq("user_id",e).order("created_at",{ascending:!1});if(t)throw Error(t.message);n(null!=r?r:[])}catch(e){n([])}finally{o(!1)}},[r,e,a]);t.useEffect(()=>{d()},[d]);let c=t.useCallback(async e=>{a&&(await a.from("notifications").update({read:!0}).eq("id",e),n(r=>r.map(r=>r.id===e?{...r,read:!0}:r)))},[a]),u=t.useCallback(async()=>{a&&e&&(await a.from("notifications").update({read:!0}).eq("user_id",e),n(e=>e.map(e=>({...e,read:!0}))))},[a,e]),f=l.filter(e=>!e.read).length;return{notifications:l,unreadCount:f,loading:i,markAsRead:c,markAllAsRead:u,refetch:d}}},29602:(e,r,a)=>{a.d(r,{cn:()=>l});var t=a(43463),s=a(69795);function l(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}}}]);